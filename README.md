# Final project of Consensys Academy 2018 - Market Place

This project implements the online market place idea. Users can buy or sell Vinyls using ETH.

Disclaimer: I am by no mean a front end developper nor a blockchain developper, this was my first website ever so the js part might be a bit crappy.

Important Remark: Page must reloaded once transaction has been accepted on metamask.


## Project Description

The market place consists in a list of stores on a central marketplace where shoppers can purchase goods (vinyl) posted by the store owners.

The market place has 4 types of participants:

* The owner of the market place who can validate administrators of the market place
* Administrators manage the marketplace, they allow store owners to add stores to the marketplace
* Store owner can manage their store’s inventory and funds. They can withdraw their funds.
* Shoppers can visit stores and purchase vinyl that are in stock using ETH


### User Stories:

* The market place owner opens the web app. The web app reads the address and identifies that the user is an market place owner, showing them market place owner only functions, such as managing admins. The market place owner adds an address to the list of approved admins, so if the owner of that address logs into the app, they have access to the admins functions.
By default, the first account created by Ganache is the owner of the contract.

* An administrator opens the web app. The web app reads the address and identifies that the user is an admin, showing them admin only functions, such as managing store owners. An admin adds an address to the list of approved store owners, so if the owner of that address logs into the app, they have access to the store owner functions.

* An approved store owner logs into the app. The web app recognizes their address and identifies them as a store owner. They are shown the store owner functions. They can create a new storefront that will be displayed on the marketplace. They can also see the storefronts that they have already created. They can click on a storefront to manage it. They can add products to the storefront. They can also withdraw any funds that the store has collected from sales.

* A shopper logs into the app. The web app does not recognize their address so they are shown the generic shopper application. From the main page they can see a list of products offered by the stores, including their price and quantity. Shoppers can purchase a product, which will debit their account and send it to the store. The quantity of the item in the store’s inventory will be reduced by the appropriate amount.


## 	Set Up


* In a tab, start Ganache client :

`$ ganache-cli` copy the Mnemonic generated

* In another tab, in the truffle folder: compile

`$ truffle compile`

* Then migrate the compiled contract into the private local blockchain created with Ganache.

`$ truffle migrate --reset`

* Start and launch the web application. ` :

`$ npm run start`

This opens a new tab on the browser on `http://localhost:3000/

*  On the browser and Metamask window:
  * Log out from Metamask
  * Click Restore the accounts from seed phrase
  * Use the Mnemonic generated by Ganache
  * Select any other network than localhost 8545 in metamask
  * Select the private network localhost 8545

Contracts can be tested by running:

`$ truffle test`


## Example of Use

* Acount 1 is the market place owner.
* Create account 2
* Make request to become an administrator
* Go back to Account 1
* Accept request from account 2
* Account 2 is now an Administator
* Create account 3
* Make request to become an shop owner
* Go back to account 2
* Accept request from account 3
* Account 3 is now a Store Owner
* Go back to account 3
* Create Store
* Add Item to Store
* Create Account 4
* Purchase Item from store of account 3
* Item is added to list of purchased goods
* Go back to account 3
* Account Balance has been updated
* Withdraw funds (sometimes this operation requires to increase gas limit!!)
